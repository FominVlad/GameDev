(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],[,,,,function(e,t,n){e.exports=n(12)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(3),l=n.n(c),o=(n(9),n(1)),s=0,i=1,u={BLACK:0,WHITE:1},m=function(e,t){return e.map((function(e){var n=t.find((function(t){return e.x===t.posX&&e.y===t.posY}));return n?Object.assign({},e,{ownerId:n.ownerId}):e}))},d=function(e){var t=e.setPlayers,n=e.setStatus,c=e.setSize,l=e.setBoard,d=e.setCurrent,f=Object(a.useState)(!1),p=Object(o.a)(f,2),b=p[0],y=p[1],h=Object(a.useState)(null),E=Object(o.a)(h,2),v=E[0],g=E[1],j=Object(a.useState)({name:"player1",playerType:i}),w=Object(o.a)(j,2),O=w[0],S=w[1],C=Object(a.useState)({name:"player2",playerType:s}),k=Object(o.a)(C,2),x=k[0],N=k[1];Object(a.useEffect)((function(){document.body.classList[{true:"add",false:"remove"}[b]]("dark")}));var T,I,B=function(e,t){return function(n){return t(Object.assign({},e,{name:n.target.value}))}};return r.a.createElement("div",{className:"card-body"},r.a.createElement("h1",{className:"card-title"},"Menu"),r.a.createElement("div",{className:"center"},v?r.a.createElement("div",{className:"error"},v):null,r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),O.name!==x.name){g(null);var a=Math.round(Math.random()),r=[O,x].map((function(e,t){return Object.assign({},e,{playerColour:t===a?u.BLACK:u.WHITE})}));fetch("/api/Game?boardSize=8",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return 201===e.status?e.json():null})).then((function(e){return e?(t(e.players),d(e.nextStepPlayerId),l(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Array(e*e).fill(null).map((function(t,n){return{x:n%e,y:Math.floor(n/e),type:"none"}}));return t?m(n,t):n}(8,e.board)),c(8),n("game")):g("The data you provided is not complete. Please check your info and try again")}))}else g("Player names should be different")}},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{for:"p1name",class:"col-sm-4 col-form-label"},"Player 1 name"),r.a.createElement("div",{class:"col-sm-8"},r.a.createElement("input",{type:"text",class:"form-control",id:"p1name",value:O.name,onChange:B(O,S)}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{for:"p2name",class:"col-sm-4 col-form-label"},"Player 2 name"),r.a.createElement("div",{class:"col-sm-8"},r.a.createElement("input",{type:"text",class:"form-control",id:"p2name",value:x.name,onChange:B(x,N)}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{for:"isCpu",class:"col-sm-4 col-form-label"},"Player 2 is CPU"),r.a.createElement("div",{class:"col-sm-8 col-form-label"},r.a.createElement("input",{type:"checkbox",id:"isCpu",checked:x.playerType===s,onChange:(T=x,I=N,function(e){return I(Object.assign({},T,{playerType:e.target.checked?0:1}))})}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{for:"isDark",class:"col-sm-4 col-form-label"},"Dark theme"),r.a.createElement("div",{class:"col-sm-8 col-form-label"},r.a.createElement("input",{type:"checkbox",id:"isDark",checked:b,onChange:function(e){return y(e.target.checked)}}))),r.a.createElement("input",{type:"submit",class:"btn btn-primary",value:"Start"}))))},f=(n(10),function(){return r.a.createElement("svg",{className:"img",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("defs",null,r.a.createElement("filter",{id:"grain",x:"0%",y:"0%",width:"100%",height:"100%",filterUnits:"objectBoundingBox",primitiveUnits:"userSpaceOnUse",colorInterpolationFilters:"linearRGB"},r.a.createElement("feTurbulence",{type:"fractalNoise",baseFrequency:"0.4 0.4",numOctaves:"3",seed:"0",x:"0%",y:"0%",width:"100%",height:"100%",result:"turbulence2"}),r.a.createElement("feBlend",{mode:"multiply",x:"0%",y:"0%",width:"100%",height:"100%",in:"SourceGraphic",in2:"turbulence2",result:"blend"}))),r.a.createElement("rect",{width:"100%",height:"100%",fill:"green",filter:"url(#grain)"}))}),p=function(e){var t=e.x,n=e.y,a=e.ownerId,c=e.click,l=e.colors,o={gridColumn:t+1,gridRow:n+1,background:e.allowed?"radial-gradient(red 6%, transparent 15%)":"none"};return r.a.createElement("div",{className:"cell",style:o,onClick:c},r.a.createElement(b,{owner:a,colors:l}))},b=function(e){var t=e.owner,n=e.colors;if("undefined"!==typeof t){var a=n.find((function(e){return e.id===t})).type;return r.a.createElement("svg",{className:"chip",viewBox:"0 0 10 10"},r.a.createElement("defs",null,r.a.createElement("radialGradient",{id:a+"grad"},r.a.createElement("stop",{offset:"60%",stopColor:"white",stopOpacity:"1"}),r.a.createElement("stop",{offset:"100%",stopColor:"white",stopOpacity:"0.8"})),r.a.createElement("mask",{id:a+"mask"},r.a.createElement("circle",{cx:"5",cy:"5",r:"5",fill:"url(#"+a+"grad)"}))),r.a.createElement("circle",{fill:a,mask:"url(#"+a+"mask)",cx:"5",cy:"5",r:"5"}))}return null},y=function(e){var t=e.size,n=e.board,c=e.players,l=e.current,i=e.setBoard,d=e.setCurrent,b=e.setWinner,y=e.setStatus,h={gridTemplateColumns:"repeat("+t+", 1fr)",gridTemplateRows:"repeat("+t+", 1fr)"},E=Object.entries(u).map((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return{id:c.find((function(e){return e.playerColour===a})).id,type:n,color:a}})),v=Object(a.useState)([]),g=Object(o.a)(v,2),j=g[0],w=g[1],O=Object(a.useState)(!1),S=Object(o.a)(O,2),C=S[0],k=S[1];Object(a.useEffect)((function(){if(c.find((function(e){return e.id===l})))c.find((function(e){return e.id===l})).playerType===s?x(0,0,!0)():fetch("/api/Game?playerId="+l,{method:"GET"}).then((function(e){return 200===e.status?e.json():null})).then((function(e){return e?w(e):null}));else{var e=c.map((function(e){return{name:e.name,count:n.filter((function(t){return t.ownerId===e.id})).length}})).sort((function(e,t){return t.count-e.count}));console.log(e),b(e[0].name),y("end")}}),[l,C]);var x=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){console.log({isCpu:a}),(j.find((function(n){return n.posX===e&&n.posY===t}))||a)&&fetch("/api/Game?playerId="+l,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({posX:e,posY:t})}).then((function(e){return 200===e.status?e.json():null})).then((function(e){return e?(i(m(n,e.changedChips)),d(e.nextStepPlayerId),k(e.nextStepPlayerId===l?!C:C)):null}))}};return r.a.createElement("div",{className:"card-body text-center"},r.a.createElement("h1",{className:"card-title"},(c.find((function(e){return e.id===l}))||{}).name,"'s turn"),c.map((function(e){return r.a.createElement("p",null,e.name,": ",n.filter((function(t){return t.ownerId===e.id})).length," points")})),r.a.createElement("div",{className:"board-wrapper"},r.a.createElement("div",{className:"board-container"},r.a.createElement("div",{className:"board"},r.a.createElement("div",{className:"bg"},r.a.createElement(f,null)),r.a.createElement("div",{className:"grid",style:h},n.map((function(e,t){return r.a.createElement(p,Object.assign({key:[e.x,e.y].join(","),click:x(e.x,e.y),allowed:j.some((function(t){return t.posX===e.x&&t.posY===e.y})),colors:E},e))})))))),r.a.createElement("button",{className:"btn btn-primary mt-4",onClick:function(){return y("menu")}},"Menu"))},h=(n(11),function(e){var t=e.winner,n=e.setStatus;return r.a.createElement("div",{className:"card-body text-center"},r.a.createElement("h1",{className:"card-title"},"Winner: ",t),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return n("menu")}},"Menu"))});var E=function(){var e=Object(a.useState)("menu"),t=Object(o.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(null),s=Object(o.a)(l,2),i=s[0],u=s[1],m=Object(a.useState)(null),f=Object(o.a)(m,2),p=f[0],b=f[1],E=Object(a.useState)(8),v=Object(o.a)(E,2),g=v[0],j=v[1],w=Object(a.useState)(0),O=Object(o.a)(w,2),S=O[0],C=O[1],k=Object(a.useState)(null),x=Object(o.a)(k,2),N=x[0],T=x[1];return r.a.createElement("div",{className:"container d-flex flex-column justify-content-center"},r.a.createElement("div",{class:"card"},function(e){switch(e){case"menu":return r.a.createElement(d,{setStatus:c,setPlayers:b,setSize:j,setBoard:u,setCurrent:C});case"game":return r.a.createElement(y,{players:p,size:g,board:i,current:S,setBoard:u,setCurrent:C,setStatus:c,setWinner:T});case"end":return r.a.createElement(h,{winner:N,setStatus:c})}}(n)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[4,1,2]]]);
//# sourceMappingURL=main.ebb2b971.chunk.js.map